<app-global-error></app-global-error>

<div class="max-w-7xl mx-auto mt-10">
  <h1 class="text-center text-4xl font-semibold">
    {{ title | uppercase }}
  </h1>

  <div class="flex justify-center items-center gap-5 mb-5 mt-10">
    <input
      type="text"
      placeholder="Введите название..."
      class="border rounded-lg py-3 px-6 outline-none text-lg w-full block"
      [(ngModel)]="filterProductName"
    />
  </div>

  <div *ngIf="loading" class="flex justify-center items-center">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 100 100"
      preserveAspectRatio="xMidYMid"
      class="fill-slate-700 w-52 h-52"
    >
      <g transform="rotate(0 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.9333333333333333s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(24 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.8666666666666667s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(48 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.8s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(72 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.7333333333333333s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(96 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.6666666666666666s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(120 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.6s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(144 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.5333333333333333s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(168 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.4666666666666667s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(192 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.4s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(216 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.3333333333333333s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(240 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.26666666666666666s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(264 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.2s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(288 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.13333333333333333s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(312 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="-0.06666666666666667s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
      <g transform="rotate(336 50 50)">
        <rect
          x="47.5"
          y="32.5"
          rx="2.5"
          ry="2.5"
          width="5"
          height="5"
          fill="inherit"
        >
          <animate
            attributeName="opacity"
            values="1;0"
            keyTimes="0;1"
            dur="1s"
            begin="0s"
            repeatCount="indefinite"
          ></animate>
        </rect>
      </g>
    </svg>
  </div>
  <div *ngIf="products$ | async as products" class="flex flex-col gap-3">
    <app-product
      *ngFor="let product of products | filterProducts: filterProductName"
      [product]="product"
    ></app-product>
  </div>
</div>

<app-modal title="Создание продукта">
  <app-create-product></app-create-product>
</app-modal>
